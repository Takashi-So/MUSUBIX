# タスク一覧: Online Library Management System
# バージョン: 1.0.0
# 作成日: 2026-01-04
# 総タスク数: 24

## Sprint 1: ドメインモデル実装

### TSK-LIB-001: Book エンティティ実装
- **説明**: 書籍エンティティとISBN値オブジェクトの実装
- **要件トレース**: REQ-BOOK-001
- **設計トレース**: DES-LIBRARY-001 §3.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] Bookエンティティが作成できる
  - [ ] ISBNのバリデーションが正しく動作する
  - [ ] 不変条件が保たれる

### TSK-LIB-002: BookCopy エンティティ実装
- **説明**: 蔵書コピーエンティティとステータス管理の実装
- **要件トレース**: REQ-BOOK-004
- **設計トレース**: DES-LIBRARY-001 §3.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] BookCopyエンティティが作成できる
  - [ ] ステータス遷移が正しく動作する
  - [ ] available/on_loan/reserved/maintenance/retired

### TSK-LIB-003: Member エンティティ実装
- **説明**: 会員エンティティとMembershipCard値オブジェクトの実装
- **要件トレース**: REQ-MEMBER-001
- **設計トレース**: DES-LIBRARY-001 §3.3
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] Memberエンティティが作成できる
  - [ ] 会員種別（一般/学生/シニア）が管理できる
  - [ ] 貸出上限が正しく適用される

### TSK-LIB-004: Penalty エンティティ実装
- **説明**: ペナルティエンティティの実装
- **要件トレース**: REQ-MEMBER-005
- **設計トレース**: DES-LIBRARY-001 §3.3
- **優先度**: P0
- **見積もり**: 1h
- **受入条件**:
  - [ ] Penaltyエンティティが作成できる
  - [ ] ペナルティ期間が計算できる

### TSK-LIB-005: Loan エンティティ実装
- **説明**: 貸出エンティティとLoanPeriod値オブジェクトの実装
- **要件トレース**: REQ-LOAN-001
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] Loanエンティティが作成できる
  - [ ] 返却期限が計算できる
  - [ ] 延滞判定ができる

### TSK-LIB-006: Reservation エンティティ実装
- **説明**: 予約エンティティとReservationQueue値オブジェクトの実装
- **要件トレース**: REQ-RESERVE-001
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] Reservationエンティティが作成できる
  - [ ] 予約順番が管理できる
  - [ ] 取置期限が計算できる

---

## Sprint 2: ドメインサービス実装

### TSK-LIB-007: LoanService ドメインサービス実装
- **説明**: 貸出ビジネスロジックの実装
- **要件トレース**: REQ-LOAN-001, REQ-LOAN-002, REQ-LOAN-003
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 3h
- **受入条件**:
  - [ ] 貸出処理が実行できる
  - [ ] 貸出資格チェックが動作する
  - [ ] 返却処理が実行できる
  - [ ] 延長処理が実行できる

### TSK-LIB-008: ReservationService ドメインサービス実装
- **説明**: 予約ビジネスロジックの実装
- **要件トレース**: REQ-RESERVE-001, REQ-RESERVE-002, REQ-RESERVE-004
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] 予約登録ができる
  - [ ] 予約キャンセルができる
  - [ ] 予約キューの繰り上げが動作する

### TSK-LIB-009: MemberService ドメインサービス実装
- **説明**: 会員ビジネスロジックの実装
- **要件トレース**: REQ-MEMBER-003, REQ-MEMBER-004, REQ-MEMBER-005
- **設計トレース**: DES-LIBRARY-001 §3.3
- **優先度**: P1
- **見積もり**: 2h
- **受入条件**:
  - [ ] 貸出上限チェックができる
  - [ ] ペナルティチェックができる
  - [ ] 非アクティブ化ができる

---

## Sprint 3: リポジトリ実装

### TSK-LIB-010: BookRepository 実装
- **説明**: 書籍リポジトリの実装（インメモリ/PostgreSQL）
- **要件トレース**: REQ-BOOK-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.1
- **優先度**: P0
- **見積もり**: 3h
- **受入条件**:
  - [ ] CRUD操作ができる
  - [ ] ISBN検索ができる
  - [ ] 全文検索ができる

### TSK-LIB-011: MemberRepository 実装
- **説明**: 会員リポジトリの実装
- **要件トレース**: REQ-MEMBER-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.3
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] CRUD操作ができる
  - [ ] メールアドレス検索ができる

### TSK-LIB-012: LoanRepository 実装
- **説明**: 貸出リポジトリの実装
- **要件トレース**: REQ-LOAN-001〜006
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] CRUD操作ができる
  - [ ] 会員ID検索ができる
  - [ ] 延滞一覧取得ができる

### TSK-LIB-013: ReservationRepository 実装
- **説明**: 予約リポジトリの実装
- **要件トレース**: REQ-RESERVE-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] CRUD操作ができる
  - [ ] 予約キュー取得ができる

---

## Sprint 4: アプリケーションサービス実装

### TSK-LIB-014: BookAppService 実装
- **説明**: 書籍ユースケースの実装
- **要件トレース**: REQ-BOOK-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.1
- **優先度**: P0
- **見積もり**: 3h
- **受入条件**:
  - [ ] 書籍登録ユースケースが動作する
  - [ ] 書籍検索ユースケースが動作する
  - [ ] 書籍廃棄ユースケースが動作する

### TSK-LIB-015: LoanAppService 実装
- **説明**: 貸出ユースケースの実装
- **要件トレース**: REQ-LOAN-001〜006
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 3h
- **受入条件**:
  - [ ] 貸出ユースケースが動作する
  - [ ] 返却ユースケースが動作する
  - [ ] 延長ユースケースが動作する

### TSK-LIB-016: MemberAppService 実装
- **説明**: 会員ユースケースの実装
- **要件トレース**: REQ-MEMBER-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.3
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] 会員登録ユースケースが動作する
  - [ ] 会員更新ユースケースが動作する

### TSK-LIB-017: ReservationAppService 実装
- **説明**: 予約ユースケースの実装
- **要件トレース**: REQ-RESERVE-001〜005
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] 予約登録ユースケースが動作する
  - [ ] 予約キャンセルユースケースが動作する

---

## Sprint 5: 通知・イベント実装

### TSK-LIB-018: NotificationStrategy 実装
- **説明**: 通知戦略パターンの実装
- **要件トレース**: REQ-NOTIFY-001, REQ-NOTIFY-002
- **設計トレース**: DES-LIBRARY-001 §4.1
- **優先度**: P1
- **見積もり**: 2h
- **受入条件**:
  - [ ] メール通知ができる
  - [ ] プッシュ通知ができる（モック）

### TSK-LIB-019: LoanEventListener 実装
- **説明**: 貸出イベントリスナーの実装
- **要件トレース**: REQ-LOAN-004, REQ-LOAN-005
- **設計トレース**: DES-LIBRARY-001 §4.1
- **優先度**: P1
- **見積もり**: 2h
- **受入条件**:
  - [ ] 延滞検出イベントが発火する
  - [ ] 延滞通知が送信される

### TSK-LIB-020: ReservationEventListener 実装
- **説明**: 予約イベントリスナーの実装
- **要件トレース**: REQ-RESERVE-003, REQ-RESERVE-004
- **設計トレース**: DES-LIBRARY-001 §3.2
- **優先度**: P1
- **見積もり**: 2h
- **受入条件**:
  - [ ] 取置通知イベントが発火する
  - [ ] 期限切れイベントが発火する

---

## Sprint 6: API実装

### TSK-LIB-021: BookController 実装
- **説明**: 書籍APIエンドポイントの実装
- **要件トレース**: REQ-BOOK-001〜005
- **設計トレース**: DES-LIBRARY-001 §7.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] POST /api/books
  - [ ] GET /api/books
  - [ ] GET /api/books/:id

### TSK-LIB-022: LoanController 実装
- **説明**: 貸出APIエンドポイントの実装
- **要件トレース**: REQ-LOAN-001〜003
- **設計トレース**: DES-LIBRARY-001 §7.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] POST /api/loans
  - [ ] POST /api/loans/:id/return
  - [ ] POST /api/loans/:id/extend

### TSK-LIB-023: MemberController 実装
- **説明**: 会員APIエンドポイントの実装
- **要件トレース**: REQ-MEMBER-001, REQ-MEMBER-002
- **設計トレース**: DES-LIBRARY-001 §7.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] POST /api/members
  - [ ] PUT /api/members/:id

### TSK-LIB-024: ReservationController 実装
- **説明**: 予約APIエンドポイントの実装
- **要件トレース**: REQ-RESERVE-001, REQ-RESERVE-002
- **設計トレース**: DES-LIBRARY-001 §7.1
- **優先度**: P0
- **見積もり**: 2h
- **受入条件**:
  - [ ] POST /api/reservations
  - [ ] DELETE /api/reservations/:id

---

## サマリー

| Sprint | タスク数 | 総見積もり | 優先度P0 |
|--------|---------|-----------|---------|
| Sprint 1 | 6 | 11h | 6 |
| Sprint 2 | 3 | 7h | 3 |
| Sprint 3 | 4 | 9h | 4 |
| Sprint 4 | 4 | 10h | 4 |
| Sprint 5 | 3 | 6h | 0 |
| Sprint 6 | 4 | 8h | 4 |
| **合計** | **24** | **51h** | **21** |

---

**生成日**: 2026-01-04
**トレーサビリティ**: 要件 ↔ 設計 ↔ タスク
